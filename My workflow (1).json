{
  "name": "My workflow",
  "nodes": [
    {
      "parameters": {
        "public": true,
        "mode": "webhook",
        "options": {
          "responseMode": "lastNode"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        0,
        0
      ],
      "id": "905e04ac-2d72-4b98-bdd9-14f93d396ad8",
      "name": "When chat message received",
      "webhookId": "9ab65d7f-26fa-476d-ad62-0bfbb43d0ba4",
      "alwaysOutputData": true,
      "executeOnce": true,
      "retryOnFail": true
    },
    {
      "parameters": {
        "resource": "assistant",
        "operation": "create",
        "modelId": {
          "__rl": true,
          "value": "gpt-4o",
          "mode": "list",
          "cachedResultName": "GPT-4O"
        },
        "name": "Ø³Ø§Ù…ÙŠ ( Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø´Ø®ØµÙŠ ) ",
        "description": "Ø§Ø¯Ø§Ø±Ø© Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯ ÙˆØ§Ù„Ø´Ø­Ù† Ù…Ù† Ø§Ù„ØµÙŠÙ†",
        "instructions": "Ø¥Ù†Øª Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ Ù…Ø±Ø¨ÙˆØ· ÙˆÙŠØ§ n8n.\nØ´ØºÙ„Ùƒ ØªØ±Ø¯ Ø¹Ù„Ù‰ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø²Ø¨Ø§ÙŠÙ† Ø§Ù„Ù„ÙŠ ØªØ¬ÙŠÙ†Ø§ Ø¹Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ø£Ùˆ Ø§Ù„Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§.\n\n### Ø§Ù„Ø³ÙŠØ§Ù‚:\n\n* ØªÙˆØµÙ„Ùƒ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø²Ø¨ÙˆÙ† ÙƒØ¥Ø¯Ø®Ø§Ù„.\n* Ø¹Ù†Ø¯Ùƒ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø¨ÙŠÙ‡Ø§ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§ØªØŒ Ø§Ù„Ø£Ø³Ø¹Ø§Ø±ØŒ Ø§Ù„Ø´Ø­Ù†ØŒ Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø¯ÙˆØ§Ù…ØŒ ÙˆØ§Ù„Ø®Ø¯Ù…Ø§Øª.\n* Ø¯ÙˆØ±Ùƒ ØªÙÙ‡Ù… Ù‚ØµØ¯ Ø§Ù„Ø²Ø¨ÙˆÙ† ÙˆØªØ¬Ø§ÙˆØ¨ Ø¨Ø£Ù‚Ø±Ø¨ Ù…Ø¹Ù„ÙˆÙ…Ø© Ø¯Ù‚ÙŠÙ‚Ø©.\n\n### Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª:\n\n1. Ø§ÙÙ‡Ù… Ø´Ù†Ùˆ ÙŠØ±ÙŠØ¯ Ø§Ù„Ø²Ø¨ÙˆÙ† (Ø³Ø¹Ø±ØŒ Ø´Ø­Ù†ØŒ Ø¯ÙˆØ§Ù…ØŒ ØªÙØ§ØµÙŠÙ„ Ù…Ù†ØªØ¬...).\n2. Ø¯ÙˆÙ‘Ø± Ø¨Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù„ÙŠ Ø¹Ø¯Ùƒ ÙˆØ·Ù„Ø¹ Ø§Ù„Ø¬ÙˆØ§Ø¨ Ø§Ù„ØµØ­ÙŠØ­.\n3. Ø¥Ø°Ø§ Ù…Ø§ÙƒÙˆ Ø¬ÙˆØ§Ø¨ Ø¯Ù‚ÙŠÙ‚ØŒ Ù‚Ø¯Ù‘Ù… Ù…Ø¹Ù„ÙˆÙ…Ø© Ù‚Ø±ÙŠØ¨Ø© ÙˆÙ…ÙÙŠØ¯Ø© Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ø­ØªØ±Ù…Ø©.\n4. Ø®Ù„Ù‘ÙŠ Ø§Ù„Ø±Ø¯ Ù‚ØµÙŠØ±ØŒ ÙˆØ¯ÙŠØŒ ÙˆÙˆØ§Ø¶Ø­ (Ø³Ø·Ø±ÙŠÙ† Ø¥Ù„Ù‰ 3).\n5. Ø¥Ø°Ø§ ÙŠØ­ØªØ§Ø¬ Ù…Ø³Ø§Ø¹Ø¯Ø© Ø£ÙƒØ«Ø±ØŒ ÙˆØ¬Ù‡Ù‡ ÙŠØªÙˆØ§ØµÙ„ ÙˆÙŠÙ‡ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„Ø¨Ø´Ø±ÙŠ (Ø±Ù‚Ù…/Ø¥ÙŠÙ…ÙŠÙ„).\n6. ØµÙŠØ§ØºØ© Ø§Ù„Ø±Ø¯ ØªÙƒÙˆÙ† Ø¨Ø§Ù„Ø£Ø³Ù„ÙˆØ¨ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ Ù…Ø§Ù„Øª Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨/Ø§Ù„Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§.\n7. Ø¥Ø°Ø§ Ù…Ù†Ø§Ø³Ø¨ØŒ Ø­Ø· Ø¥ÙŠÙ…ÙˆØ¬ÙŠ Ø¨Ø³ÙŠØ· ÙŠØ®Ù„ÙŠ Ø§Ù„Ø¬Ùˆ Ø£Ù„Ø·ÙÙ.\n\n### Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª:\n\n* Ø±Ø³Ø§Ù„Ø© Ù†ØµÙŠØ© ÙˆØ­Ø¯Ø© (Ù‚ØµÙŠØ±Ø©).\n* Ø§Ù„Ù„ØºØ© Ù†ÙØ³ Ù„ØºØ© Ø§Ù„Ø²Ø¨ÙˆÙ† (Ø¹Ø±Ø¨ÙŠ/Ø¥Ù†ÙƒÙ„ÙŠØ²ÙŠ).\n\n### Ù…Ø«Ø§Ù„ Ø¥Ø¯Ø®Ø§Ù„:\n\n\"Ø´Ù„ÙˆÙ† Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ù…Ø§Ù„ Ø§Ù„Ø´Ø­Ù† Ù…Ù† Ø§Ù„ØµÙŠÙ† Ù„Ø¨ØºØ¯Ø§Ø¯ØŸ\"\n\n### Ù…Ø«Ø§Ù„ Ø¥Ø®Ø±Ø§Ø¬:\n\n\"Ù‡Ù„Ø§ Ø¨ÙŠÙƒ ğŸŒ¹ Ø§Ù„Ø´Ø­Ù† Ù…Ù† Ø§Ù„ØµÙŠÙ† Ù„Ø¨ØºØ¯Ø§Ø¯ ÙŠÙƒÙ„Ù ØªÙ‚Ø±ÙŠØ¨Ø§ 9â€“10 Ø¯ÙˆÙ„Ø§Ø± Ù„Ù„ÙƒÙŠÙ„Ùˆ Ø¬ÙˆÙ‘ÙŠØŒ Ø£Ùˆ Ø¨Ø­Ø¯ÙˆØ¯ 250,000 Ø¯ÙŠÙ†Ø§Ø± Ù„Ù„Ù…ØªØ± Ø§Ù„Ù…ÙƒØ¹Ø¨ Ø¨Ø§Ù„Ø¨Ø­Ø±. ØªØ­Ø¨ Ø£Ø­Ø³Ø¨Ù„Ùƒ Ø´ÙƒØ¯ ÙŠØ·Ù„Ø¹ Ø­Ø³Ø¨ Ø¨Ø¶Ø§Ø¹ØªÙƒØŸ\"\n",
        "codeInterpreter": true,
        "knowledgeRetrieval": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        208,
        0
      ],
      "id": "aefe3e15-1a27-40e7-aac6-dc007f4d7f70",
      "name": "Create an assistant",
      "alwaysOutputData": true,
      "executeOnce": true,
      "retryOnFail": true,
      "credentials": {
        "openAiApi": {
          "id": "77DnKIXD9UYGaWCP",
          "name": "OpenAi account 2"
        }
      }
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.noOp",
      "name": "Replace Me",
      "typeVersion": 1,
      "position": [
        832,
        0
      ],
      "id": "6c4d28f1-02c9-4b3a-9bd1-7fbcfaa50ede"
    },
    {
      "parameters": {
        "text": "=",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.informationExtractor",
      "typeVersion": 1.2,
      "position": [
        976,
        48
      ],
      "id": "37d53210-c565-4b5d-b644-85e337c49e22",
      "name": "Information Extractor",
      "onError": "continueRegularOutput",
      "notes": "You are an AI chat assistant integrated into an N8N workflow. Your main role is to assist clients who send messages, providing accurate information from a provided database or using AI knowledge if the database does not have the answer. Always be friendly, slightly professional, and use an Iraqi Arabic accent.  \n\nWorkflow steps:  \n1. **Trigger:** A client sends a message â†’ start this workflow.  \n2. **Greeting:** Welcome the client warmly and ask how you can help. Example: \"Ù‡Ù„Ø§ ÙˆØºÙ„Ø§! Ø´Ù„ÙˆÙ†ÙƒØŸ Ø§Ù†ÙŠ Ù…ÙˆØ¬ÙˆØ¯ Ø­ØªÙ‰ Ø§Ø³Ø§Ø¹Ø¯Ùƒ. Ø´Ù†Ùˆ Ø§Ù„Ù„ÙŠ ØªØ­Ø¨ ØªØ¹Ø±ÙÙ‡ Ø§Ù„ÙŠÙˆÙ…ØŸ\"  \n3. **Understanding:** Carefully read and understand the clientâ€™s message.  \n4. **Database Check:** Search the provided database for accurate information.  \n5. **AI Knowledge:** If the database does not contain the needed information, provide the answer using your AI knowledge. Ensure accuracy.  \n6. **Response:** Reply in friendly Iraqi Arabic, slightly professional, concise, and clear. Example: \"Ø§Ù† Ø´Ø§Ø¡ Ø§Ù„Ù„Ù‡ Ø§Ù‚Ø¯Ø± Ø§Ø³Ø§Ø¹Ø¯Ùƒ. Ø­Ø³Ø¨ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù„ÙŠ Ø¹Ù†Ø¯Ù†Ø§ØŒ â€¦\"  \n7. **Follow-up:** Ask politely if the client needs anything else. Example: \"Ù‡Ù„ ØªØ­Ø¨ Ø§Ø³Ø§Ø¹Ø¯Ùƒ Ø¨Ø´ÙŠ Ø«Ø§Ù†ÙŠØŸ\"  \n\n**Important:**  \n- Always prioritize accuracy and clarity.  \n- Keep answers natural, warm, and approachable.  \n- Avoid overly formal language; Iraqi accent is preferred.  \n- Ensure client feels welcomed and supported at every step.  \n\nVariables you can use in your workflow:  \n- `{{client_message}}` â†’ The message sent by the client.  \n- `{{database_result}}` â†’ Information retrieved from your database.  \n- `{{ai_response}}` â†’ AI-generated response if database info is missing.  \n\n"
    }
  ],
  "pinData": {
    "When chat message received": [
      {
        "json": {
          "name": "AI Customer Support",
          "nodes": [
            {
              "parameters": {
                "triggerOn": "all",
                "webhookPath": "incoming-message",
                "responseMode": "onReceived"
              },
              "name": "Trigger Incoming Messages",
              "type": "n8n-nodes-base.webhook",
              "typeVersion": 1,
              "position": [
                250,
                300
              ]
            },
            {
              "parameters": {
                "authentication": "predefinedCredentialType",
                "aiModel": "gpt-4",
                "prompt": "You are a smart assistant for X Plus Mobile Store. Your task is to reply to client messages in the same language (Arabic or English) based on the data from Google Sheets FAQ_Data. If no exact answer exists, generate polite helpful response. Keep replies 1-3 sentences, friendly, professional. Always end with a helpful closing question. Input Message: {{$json[\"body\"]}}"
              },
              "name": "AI Reply",
              "type": "n8n-nodes-base.openai",
              "typeVersion": 1,
              "position": [
                600,
                300
              ]
            },
            {
              "parameters": {
                "operation": "read",
                "sheetId": "<YOUR_GOOGLE_SHEET_ID>",
                "range": "FAQ_Data"
              },
              "name": "Get Knowledge Base",
              "type": "n8n-nodes-base.googleSheets",
              "typeVersion": 1,
              "position": [
                400,
                300
              ]
            },
            {
              "parameters": {
                "resource": "message",
                "operation": "send",
                "channel": "same",
                "message": "{{$node[\"AI Reply\"].json[\"text\"]}}"
              },
              "name": "Send Reply",
              "type": "n8n-nodes-base.messaging",
              "typeVersion": 1,
              "position": [
                850,
                300
              ]
            }
          ],
          "connections": {
            "Trigger Incoming Messages": {
              "main": [
                [
                  {
                    "node": "Get Knowledge Base",
                    "type": "main",
                    "index": 0
                  }
                ]
              ]
            },
            "Get Knowledge Base": {
              "main": [
                [
                  {
                    "node": "AI Reply",
                    "type": "main",
                    "index": 0
                  }
                ]
              ]
            },
            "AI Reply": {
              "main": [
                [
                  {
                    "node": "Send Reply",
                    "type": "main",
                    "index": 0
                  }
                ]
              ]
            }
          }
        }
      }
    ]
  },
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "Create an assistant",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create an assistant": {
      "main": [
        []
      ]
    },
    "Replace Me": {
      "main": [
        [
          {
            "node": "Information Extractor",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1",
    "callerPolicy": "workflowsFromSameOwner",
    "errorWorkflow": "ItEcAcuRoVkvV8xY"
  },
  "versionId": "d18d5002-fcbd-47b7-86b0-c44b2fc71158",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "e6800de071772aa575669996c416f5a7c1a51b4a496994f19efb952d86002dcc"
  },
  "id": "ItEcAcuRoVkvV8xY",
  "tags": []
}